<table id='jky-app-table' class='table table-striped'>
	<thead>
		<tr>
			<th class='jky-td-checkbox'	><input id='jky-check-all' type='checkbox' title="Click here to check all records" /></th>
			<th class='jky-td-number'	><span>   Incoming<br>Number	</span></th>
			<th class='jky-td-name-s'	><span>   Supplier				</span></th>
			<th class='jky-td-number'	><span>     NFe DL				</span></th>
			<th class='jky-td-number'	><span>     NFe TM				</span></th>
			<th class='jky-td-date'		><span>    Invoice<br>Date		</span></th>
			<th class='jky-td-date'		><span>   Received<br>Date		</span></th>
			<th class='jky-td-weight'	><span>    Invoice<br>Weight	</span></th>
			<th class='jky-td-weight'	><span>   Received<br>Weight	</span></th>
		</tr>
	</thead>

	<tbody id='jky-table-body'></tbody>
</table>

<div id='jky-app-graph'>

<div style="padding:10px;:>
	<h3><a name="s1">Paired Bar Charts</a></h3>
	A July/2011 blog post on stalled budget negotiations in the US, came with a bar chart
	that placed Obama's proposed tax increases and spending cuts, alongside those recent presidents.
	In the chart below, maroon bars represent budget cuts,
	while blue bars represent tax increases.
	I didn't have access to the raw data,
	so the chart below is based on eyeballing the values in the original bar chart.
	Since the chart relies on very few data points, I just hard-coded the data.
</div>

<center>
<div id="searchVolume">
    <div id="tooltip" class="hidden">
        <p><strong>CPC</strong>
        </p>
        <p class="indent">$<span id="cpcVal">5</span>
        </p>
    </div>
</div>
</center>

<style>
#tooltip {
	position: absolute;
	width: 50px;
	height: auto;
	padding: 10px;
	background-color: white;
	-webkit-border-radius: 10px;
	-moz-border-radius: 10px;
	border-radius: 10px;
	-webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
	-moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
	box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
	pointer-events: none;
}
#tooltip.hidden {
	display: none;
}
#tooltip p {
	margin: 0;
	font-family: sans-serif;
	font-size: 12px;
	line-height: 16px;
}
.indent{
	padding-left: 5px;
}

rect {
	-moz-transition: all 0.3s;
	-webkit-transition: all 0.3s;
	-o-transition: all 0.3s;
	transition: all 0.3s;
}
rect:hover{
	fill: orange;
}
</style>

<script>
	var w = 300;
var h = 200;

var colors = ["#377EB8", "#4DAF4A"];

var dataset =
	[{"keyword": "payday loans"		, "glob": 900000, "local": 673000, "cpc": "14.11"}
	,{"keyword": "title loans"		, "glob": 165000, "local": 165000, "cpc": "12.53"}
	,{"keyword": "personal loans"	, "glob": 550000, "local": 301000, "cpc":  "6.14"}
	,{"keyword": "title loans"		, "glob": 165000, "local": 165000, "cpc": "12.53"}
	,{"keyword": "personal loans"	, "glob": 550000, "local": 301000, "cpc":  "6.14"}
	,{"keyword": "title loans"		, "glob": 165000, "local": 165000, "cpc": "12.53"}
	,{"keyword": "personal loans"	, "glob": 550000, "local": 301000, "cpc":  "6.14"}
	,{"keyword": "title loans"		, "glob": 165000, "local": 165000, "cpc": "12.53"}
	,{"keyword": "personal loans"	, "glob": 550000, "local": 301000, "cpc":  "6.14"}
	,{"keyword": "title loans"		, "glob": 165000, "local": 165000, "cpc": "12.53"}
	,{"keyword": "personal loans"	, "glob": 550000, "local": 301000, "cpc":  "6.14"}
	];

var data = [[1500000, 165000, 550000],
			[673000, 165000, 301000]];

var tdata = d3.transpose(dataset.glob, dataset.local);

var series = 2; // Global & Local

var x0Scale = d3.scale.ordinal()
				.domain(d3.range(dataset.length))
				.rangeRoundBands([0, w], 0.05);
var x1Scale = d3.scale.ordinal()
				.domain(d3.range(dataset.length))
				.rangeRoundBands([0, w], 0.05);

var yScale = d3.scale.linear()
				.domain([0, d3.max(dataset, function(d) {return d.glob;})])
				.range([h,0]);

var glob = function(d) {
	return d.glob;
};
var cpc = function(d) {
	return d.cpc;
};

var commaFormat = d3.format(',');

//SVG element
var svg = d3.select("#searchVolume")
			.append("svg")
			.attr("width", w)
			.attr("height", h)
	;

	// Graph Bars
var sets = svg.selectAll(".set")
	.data(dataset)
	.enter().append("g")
            .attr("class","set")
     .attr("transform",function(d,i){
         return "translate(" + x0Scale(i) + ",0)"
     })
	.on("mouseover", function(d,i) {
		//Get this bar's x/y values, then augment for the tooltip
		var xPosition = parseFloat(x0Scale(i) + x0Scale.rangeBand() / 6);
		var yPosition = 0;
		//Update Tooltip Position & value
		d3.select("#tooltip")
			.style("left", xPosition + "px")
			.style("top", yPosition + "px")
			.select("#cpcVal")
			.text(d.cpc);
		d3.select("#tooltip").classed("hidden", false);
	})
	.on("mouseout", function() {
		//Remove the tooltip
		d3.select("#tooltip").classed("hidden", true);
	});

sets.append("rect")
    .attr("class","local")
	.attr("width", x0Scale.rangeBand()/2)
	.attr("y", function(d) {
		return yScale(d.local);
	})
    .attr("x", x0Scale.rangeBand()/2)
    .attr("height", function(d){
        return h - yScale(d.local);
    })
	.attr("fill", colors[0])

sets.append("rect")
    .attr("class","glob")
	.attr("width", x0Scale.rangeBand()/2)
	.attr("y", function(d) {
		return yScale(d.glob);
	})
//    .attr("x", x0Scale.rangeBand()/2)
    .attr("height", function(d){
        return h - yScale(d.glob);
    })
	.attr("fill", colors[1])

</script>

</div>

<div id='jky-app-form'>
	<div id='jky-form-control'>
		<div id='jky-form-actions'>
<!--		<button id='jky-action-generate'	class='btn'	type='button' title="Click here to generate check out"	><span>Generate Check Out	</span></button>	-->
			<button id='jky-action-close'		class='btn' type='button' title="Click here to close this incoming"	><span>Close Incoming		</span></button>
		</div>
		<div id='jky-form-status'>
			<span>Status</span>:
			<button class='btn' type='button' disabled><span id='jky-status'></span></button>
		</div>
		<div class='jky-clear'></div>
	</div>

	<div id='jky-form-data'>
		<div class='jky-left'>
			<div class='jky-form-line'>
				<div class='jky-form-label'><span>Incoming Number</span>:</div>
				<input  id='jky-incoming-number' class='jky-form-number jky-form-key' disabled />
			</div>
			<div class='jky-form-line'>
				<div class='jky-form-label'><span>Supplier</span>:</div>
				<select id='jky-supplier-name'></select>
			</div>
			<div class='jky-form-line'>
				<div class='jky-form-label'><span>NFe DL</span>:</div>
				<input  id='jky-nfe-dl' class='jky-form-number' />
			</div>
			<div class='jky-form-line'>
				<div class='jky-form-label'><span>NFe TM</span>:</div>
				<input  id='jky-nfe-tm' class='jky-form-number' />
			</div>
		</div>
		<div class='jky-clear'></div>
		<br>

		<div class='jky-left'>
			<div class='jky-form-line'>
				<div class='jky-form-label'><span>Received Date</span>:</div>
				<div id='jky-received-date' class='input-append date'>
					<input class='jky-form-date' type='text' />
					<span class='add-on'><i data-time-icon='icon-time' data-date-icon='icon-calendar'></i></span>
				</div>
			</div>
			<div class='jky-form-line'>
				<div class='jky-form-label'><span>Invoice Date</span>:</div>
				<div id='jky-invoice-date' class='input-append date'>
					<input class='jky-form-date' type='text' />
					<span class='add-on'><i data-time-icon='icon-time' data-date-icon='icon-calendar'></i></span>
				</div>
			</div>
		</div>
		<div class='jky-clear'></div>

		<div class='jky-left'>
			<div class='jky-form-line'><div class='jky-form-label'><span>Invoice Amount</span>:</div><input  id='jky-invoice-amount'	class='jky-form-amount' /></div>
			<div class='jky-form-line'><div class='jky-form-label'><span>Invoice Weight</span>:</div><input  id='jky-invoice-weight'	class='jky-form-weight' /></div>
		</div>
		<div class='jky-left'>
			<div class='jky-form-line'><div class='jky-form-label'><span>Received Amount</span>:</div><input  id='jky-received-amount'	class='jky-form-amount' disabled  /></div>
			<div class='jky-form-line'><div class='jky-form-label'><span>Received Weight</span>:</div><input  id='jky-received-weight'	class='jky-form-weight' disabled /></div>
		</div>
		<div class='jky-clear'></div>
		<br>

		<div>
			<div class='jky-form-label'></div>
			<div class='jky-form-buttons'>
				  <button id='jky-action-save'		class='btn btn-success' type='button' title="Click here to save all changes"		><span>Save		</span></button>
			&nbsp;<button id='jky-action-copy'		class='btn btn-success' type='button' title="Click here to duplicate this record"	><span>Copy		</span></button>
			&nbsp;<button id='jky-action-delete'	class='btn'				type='button' title="Click here to delete this record"		><span>Delete	</span></button>
			&nbsp;<button id='jky-action-cancel'	class='btn'				type='button' title="Click here to cancel any changes"		><span>Cancel	</span></button>
			</div>
		</div>
		<div class='jky-clear'></div>
	</div>

	<div id='jky-form-tabs' class='tabbable'>
		<ul class='nav nav-tabs' id='cd-ul-tabs'>
			<li	id='jky-tab-batches'		class='active'	><a href='#jky-pane-batches'		data-toggle='tab'><span>Batches			</span></a></li>
		</ul>

		<div class='tab-content'>
			<div id='jky-pane-batches' class='tab-pane active'>
				<table class='table table-striped' >
					<thead>
						<tr>
							<th class='jky-td-action'></th>
							<th class='jky-td-code'		><span>  Product<br>Code	</span></th>
							<th class='jky-td-number'	><span>    Batch<br>Number	</span></th>
							<th class='jky-td-thread'	><span>   Thread			</span></th>
							<th class='jky-td-key'		><span> Purchase			</span></th>
							<th class='jky-td-boxes'	><span> Received<br>Boxes	</span></th>
							<th class='jky-td-key-s'	><span>   Labels<br>Printed	</span></th>
							<th class='jky-td-integer'	><span>   Number<br>Cones	</span></th>
							<th class='jky-td-weight'	><span> Received<br>Weight	</span></th>
							<th class='jky-td-price'	><span>     Unit<br>Price	</span></th>
						</tr>
					</thead>
					<tbody id='jky-batches-body'></tbody>
					<tfoot>
						<tr>
							<td colspan='2'>
								<button id='jky-batch-add-new' class='btn btn-success' type='button'><span>Add New</span></button>
							</td>
						</tr>
					</tfoot>
				</table>
			</div>
		</div>
	</div>
	<div id='jky-form-footer'></div>
</div>

<div id='jky-boxes-layer' class='modal hide fade in'>
	<div class='modal-header'>
		<a class='close' data-dismiss='modal'>X</a>
		<h3><span>Print</span>: <span>Labels</span></h3>
	</div>
	<div class='modal-body'>
		<div class='jky-boxes-line'><div class='jky-boxes-label'><span>  Received Boxes</span>:</div><input id='jky-boxes-received-boxes'	type='text' disabled	/></div>
		<div class='jky-boxes-line'><div class='jky-boxes-label'><span>  Labels Printed</span>:</div><input id='jky-boxes-labels-printed'	type='text' disabled	/></div>
		<div class='jky-boxes-line'><div class='jky-boxes-label'><span>Labels Unprinted</span>:</div><input id='jky-boxes-labels-unprinted'	type='text' disabled	/></div>
		<div class='jky-boxes-line'><div class='jky-boxes-label'><span> Labels to Print</span>:</div><input id='jky-boxes-labels-to-print'	type='text'				/></div>
		<div class='jky-boxes-line'><div class='jky-boxes-label'><span>        Location</span>:</div><input id='jky-boxes-location'			type='text'				/></div>
		<div class='jky-boxes-line'><div class='jky-boxes-label'><span>  Average Weight</span>:</div><input id='jky-boxes-average-weight'	type='text'	disabled	/></div>
	</div>
	<div class='modal-footer'>
		<button  id='jky-boxes-print'  class='btn btn-success'			type='button'><span>Print</span></button>
		&nbsp;<a id='jky-boxes-cancel' class='btn' data-dismiss='modal'	type='button'><span>Cancel </span></a>
	</div>
</div>

<div id='jky-body-loaded'></div>
<script src='js/incomings.js'		></script>
<script src='js/JKY.Thread.js'		></script>
<script src='js/JKY.PurLine.js'		></script>
<script src='js/JKY.Batch.js'		></script>
<script src='js/incoming_batches.js'></script>
